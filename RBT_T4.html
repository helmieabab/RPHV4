<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPH RBT T4 - MOHAMAD HELMIE</title>
    <style>
        :root { --primary: #e67e22; --success: #27ae60; --ai: #8e44ad; }
        body { font-family: 'Segoe UI', sans-serif; background: #fff5e6; padding: 15px; margin: 0; }
        .container { max-width: 1100px; margin: auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .header { text-align: center; border-bottom: 2px solid #333; margin-bottom: 25px; padding-bottom: 10px; }
        .header h1 { margin: 0; font-size: 22px; text-transform: uppercase; }
        .header p { margin: 5px 0; font-weight: bold; color: #555; }
        .input-section { background: #fffaf0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 20px; }
        .grid-flex { display: flex; flex-wrap: wrap; gap: 15px; margin-bottom: 15px; }
        .grid-flex div { flex: 1; min-width: 200px; }
        label { font-weight: bold; font-size: 13px; color: var(--primary); display: block; margin-bottom: 5px; }
        select, input, textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; font-size: 14px; box-sizing: border-box; }
        .sp-table-wrapper { max-height: 300px; overflow-y: auto; border: 1px solid #ccc; border-radius: 5px; background: white; margin-top: 5px; }
        .sp-table { width: 100%; border-collapse: collapse; font-size: 13px; }
        .sp-table tr { cursor: pointer; border-bottom: 1px solid #eee; transition: 0.2s; }
        .sp-table tr:hover { background: #f1f1f1; }
        .sp-table td { padding: 12px; line-height: 1.5; }
        .selected-row { background: #fef5e7 !important; font-weight: bold; border-left: 5px solid var(--primary); }
        .ai-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin-top: 20px; }
        .ai-box { border: 1px solid #d1d1d1; padding: 15px; border-radius: 8px; background: #fff; }
        .btn-ai { background: var(--ai); color: white; border: none; padding: 7px 12px; border-radius: 4px; cursor: pointer; font-size: 11px; margin-bottom: 8px; font-weight: bold; }
        .btn-save { background: var(--success); color: white; padding: 15px; border: none; border-radius: 5px; width: 100%; font-size: 16px; cursor: pointer; font-weight: bold; margin-top: 25px; }
        .footer-btns { display: flex; gap: 10px; margin-top: 15px; }
        .btn-util { flex: 1; padding: 12px; border: none; border-radius: 5px; cursor: pointer; color: white; font-weight: bold; text-align: center; text-decoration: none; font-size: 14px; }
        .rph-table { width: 100%; border-collapse: collapse; margin-top: 40px; border: 2px solid #000; background: white; }
        .rph-table td { border: 1px solid #000; padding: 12px; vertical-align: top; font-size: 14px; color: black; line-height: 1.6; }
        .label-cell { width: 220px; background: #f2f2f2; font-weight: bold; text-transform: uppercase; }
        @media print { .no-print { display: none; } }
    </style>
</head>
<body>

<div class="container no-print">
    <div class="header">
        <h1>RPH REKA BENTUK DAN TEKNOLOGI</h1>
        <p>MOHAMAD HELMIE | RBT TAHUN 4</p>
    </div>

    <div class="input-section">
        <div class="grid-flex">
            <div><label>Tarikh</label><input type="date" id="tark" onchange="setHari()"></div>
            <div><label>Hari</label><input type="text" id="hari" readonly></div>
            <div><label>Minggu</label><select id="mng"></select></div>
            <div><label>Masa</label><input type="text" id="masa" placeholder="09:00 - 10:00"></div>
        </div>

        <div><label>Bidang / Modul</label><input type="text" id="modul" placeholder="Pilih SK di bawah untuk auto-isi"></div>

        <div style="margin-top:15px">
            <label>Standard Kandungan (Pilih SK)</label>
            <select id="sk_select" onchange="loadSP()">
                <option value="">-- Pilih SK --</option>
                <option value="1.1">1.1 Amalan Keselamatan Bengkel</option>
                <option value="2.1">2.1 Maksud & Kepentingan Reka Bentuk</option>
                <option value="2.2">2.2 Reka Bentuk Produk Bertema</option>
                <option value="3.1">3.1 Aplikasi Teknologi (Konvensional/Moden)</option>
                <option value="4.1">4.1 Reka Bentuk Pembungkusan</option>
                <option value="5.1">5.1 Reka Bentuk Makanan</option>
                <option value="6.1">6.1 Asas Pengaturcaraan (Algoritma/Carta Alir)</option>
                <option value="6.2">6.2 Pembangunan Kod Arahan (Scratch)</option>
            </select>
        </div>

        <div style="margin-top:15px">
            <label>Standard Pembelajaran (Klik untuk pilih SP)</label>
            <div class="sp-table-wrapper">
                <table class="sp-table" id="sp-table-body"></table>
            </div>
        </div>

        <div class="ai-grid">
            <div class="ai-box">
                <button class="btn-ai" onclick="janaAI('obj')">✨ JANA OBJEKTIF</button>
                <textarea id="ai_obj" rows="4"></textarea>
            </div>
            <div class="ai-box">
                <button class="btn-ai" onclick="janaAI('act')">✨ JANA AKTIVITI</button>
                <textarea id="ai_act" rows="4"></textarea>
            </div>
            <div class="ai-box">
                <button class="btn-ai" onclick="janaAI('ref')">✨ JANA REFLEKSI</button>
                <textarea id="ai_ref" rows="4"></textarea>
            </div>
        </div>

        <button class="btn-save" onclick="simpan()">SIMPAN RPH KE JADUAL</button>
        
        <div class="footer-btns">
            <button class="btn-util" style="background:#333" onclick="window.print()">CETAK RPH (PDF)</button>
            <a href="index.html" class="btn-util" style="background:#7f8c8d">KEMBALI KE HUB</a>
        </div>
    </div>
</div>

<div id="output"></div>

<script>
const dataSP = {
    "1.1": ["Menyatakan peraturan keselamatan diri, bengkel, peralatan dan bahan.", "Menerangkan maksud simbol dan tanda keselamatan.", "Mengaplikasikan langkah sekiranya berlaku kemalangan.", "Membincangkan amalan kebersihan dan penyelenggaraan peralatan.", "Merumuskan kesan mengabaikan amalan keselamatan."],
    "2.1": ["Menerangkan maksud reka bentuk berdasarkan produk sedia ada.", "Mengenal pasti kepentingan reka bentuk dalam kehidupan.", "Membincangkan laluan kerjaya dalam reka bentuk.", "Menghuraikan apresiasi reka bentuk di persekitaran.", "Memperihalkan elemen reka bentuk (garisan, rupa, bentuk, tekstur, dll)."],
    "2.2": ["Mengenal pasti dan melakar pelbagai jenis garisan.", "Menjana idea menghasilkan lakaran menggunakan gabungan bentuk asas.", "Menganalisis dan menilai lakaran produk bertema.", "Menghasilkan reka bentuk produk bertema mengikut lakaran."],
    "3.1": ["Menerangkan teknologi dan kepentingannya.", "Menghuraikan teknologi peralatan konvensional dan moden.", "Membuat lakaran bermaklumat produk teknologi yang akan dihasilkan.", "Mengira kos bahan dan menghasilkan produk menggunakan teknologi dipilih."],
    "4.1": ["Menghubung kait pembungkusan sedia ada dengan reka bentuk.", "Menyenaraikan ciri pembungkusan yang baik mengikut kategori produk.", "Menerangkan kepentingan reka bentuk pembungkusan.", "Melakar dan menghasilkan reka bentuk pembungkusan serta mengira kos."],
    "5.1": ["Mengenal pasti reka bentuk yang sesuai pada jenis makanan.", "Menerangkan kepentingan reka bentuk makanan.", "Melakar dan menghasilkan reka bentuk pada bahan makanan yang dipilih."],
    "6.1": ["Menyatakan maksud pengaturcaraan dan kegunaannya pada perkakasan.", "Mengenal pasti algoritma, pseudokod dan carta alir.", "Menulis pseudokod dan melukis carta alir struktur kawalan jujukan."],
    "6.2": ["Mengenal pasti fitur-fitur pada antara muka perisian pengaturcaraan.", "Menggunakan fitur untuk menggerakkan objek, dialog, dan bunyi.", "Membina atur cara struktur kawalan jujukan dan membaiki ralat."]
};

let selectedSPs = [];
const mS = document.getElementById('mng'); for(let i=1; i<=42; i++) mS.innerHTML += `<option value="${i}">Minggu ${i}</option>`;

function setHari() { 
    let d = new Date(document.getElementById('tark').value); 
    document.getElementById('hari').value = ['Ahad','Isnin','Selasa','Rabu','Khamis','Jumaat','Sabtu'][d.getDay()] || ''; 
}

function loadSP() {
    let sk = document.getElementById('sk_select').value;
    let skLabel = document.getElementById('sk_select').options[document.getElementById('sk_select').selectedIndex].text;
    document.getElementById('modul').value = skLabel;
    
    let b = document.getElementById('sp-table-body'); 
    b.innerHTML = "";
    selectedSPs = []; 
    if(dataSP[sk]) {
        dataSP[sk].forEach((s) => {
            let row = b.insertRow();
            row.onclick = function() { 
                if(this.classList.contains('selected-row')) {
                    this.classList.remove('selected-row');
                    selectedSPs = selectedSPs.filter(item => item !== s);
                } else {
                    this.classList.add('selected-row');
                    selectedSPs.push(s);
                }
            };
            row.innerHTML = `<td>${s}</td>`;
        });
    }
}

function janaAI(t) {
    let mod = document.getElementById('modul').value || "Modul RBT";
    if(selectedSPs.length === 0) return alert("Pilih SP dahulu!");
    if(t==='obj') {
        document.getElementById('ai_obj').value = `Pada akhir PdPc, murid dapat:\n1. Menguasai kemahiran dalam ${mod} berdasarkan Standard Pembelajaran yang dipilih secara kreatif.`;
    } else if(t==='act') {
        document.getElementById('ai_act').value = `1. Set Induksi: Murid melihat contoh/situasi berkaitan ${mod}.\n2. Aktiviti: Murid melakukan amali/lakaran berdasarkan SP yang dipilih dengan bimbingan guru.\n3. Penutup: Murid membentangkan hasil kerja dan membuat rumusan.`;
    } else {
        document.getElementById('ai_ref').value = `___ / ___ murid mencapai objektif hari ini.`;
    }
}

function simpan() {
    if(selectedSPs.length === 0) return alert("Pilih sekurang-kurangnya satu SP!");
    let skText = document.getElementById('sk_select').options[document.getElementById('sk_select').selectedIndex].text;
    let spHtml = selectedSPs.map(s => `• ${s}`).join("<br>");
    let html = `<table class="rph-table">
        <tr><td class="label-cell">INFO RPH</td><td>MG ${document.getElementById('mng').value} | ${document.getElementById('tark').value} | ${document.getElementById('hari').value}</td></tr>
        <tr><td class="label-cell">MODUL / MASA</td><td>${document.getElementById('modul').value} | ${document.getElementById('masa').value}</td></tr>
        <tr><td class="label-cell">STANDARD KANDUNGAN</td><td>${skText}</td></tr>
        <tr><td class="label-cell">STANDARD PEMBELAJARAN</td><td>${spHtml}</td></tr>
        <tr><td class="label-cell">OBJEKTIF</td><td>${document.getElementById('ai_obj').value.replace(/\n/g,"<br>")}</td></tr>
        <tr><td class="label-cell">AKTIVITI</td><td>${document.getElementById('ai_act').value.replace(/\n/g,"<br>")}</td></tr>
    </table><div style="page-break-after:always;"></div>`;
    document.getElementById('output').innerHTML += html;
}
</script>
</body>
</html>