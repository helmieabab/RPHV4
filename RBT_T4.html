<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPH RBT TAHUN 4</title>
    <style>
        :root { --primary: #2c3e50; --accent: #e67e22; --bg: #fdfaf4; }
        body { font-family: 'Arial', sans-serif; background: var(--bg); margin: 0; padding: 20px; }
        .no-print-zone { max-width: 1000px; margin: auto; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); margin-bottom: 40px; }
        h1.setup-title { text-align: center; color: var(--primary); font-size: 22px; border-bottom: 2px solid var(--accent); padding-bottom: 10px; margin-bottom: 20px; }
        .input-group { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px; }
        label { display: block; font-weight: bold; font-size: 13px; margin-bottom: 5px; color: #555; }
        select, input, textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; font-size: 14px; }
        .sp-box { border: 1px solid #ddd; border-radius: 6px; max-height: 250px; overflow-y: auto; background: #fafafa; }
        .sp-table { width: 100%; border-collapse: collapse; }
        .sp-table tr { cursor: pointer; border-bottom: 1px solid #eee; }
        .sp-table tr:hover { background: #fff5e6; }
        .sp-table td { padding: 10px; font-size: 13px; }
        .selected-row { background: #fdebd0 !important; font-weight: bold; border-left: 4px solid var(--accent); }
        .ai-tools { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 20px; }
        .btn-ai { background: #8e44ad; color: white; border: none; padding: 8px; border-radius: 4px; cursor: pointer; font-weight: bold; font-size: 11px; width: 100%; margin-bottom: 5px; }
        .btn-main { background: #27ae60; color: white; border: none; padding: 15px; border-radius: 6px; width: 100%; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 20px; }
        .btn-nav { display: inline-block; margin-top: 10px; padding: 10px 20px; background: #7f8c8d; color: white; text-decoration: none; border-radius: 4px; font-weight: bold; }

        /* PRINT FORMAT - MATURE & PROFESSIONAL */
        .rph-paper { width: 210mm; padding: 20mm; margin: auto; background: white; color: black; border: 1px solid #eee; box-sizing: border-box; }
        .rph-header { text-align: center; border-bottom: 4px double #000; padding-bottom: 10px; margin-bottom: 20px; }
        .rph-header h2 { margin: 0; font-size: 24px; text-transform: uppercase; letter-spacing: 1px; }
        .rph-header h3 { margin: 5px 0 0 0; font-size: 18px; text-transform: uppercase; }
        .info-bar { display: grid; grid-template-columns: 1fr 1fr; border-bottom: 1px solid #000; padding-bottom: 10px; margin-bottom: 15px; font-size: 14px; line-height: 1.6; }
        .rph-main-table { width: 100%; border-collapse: collapse; table-layout: fixed; }
        .rph-main-table td { border: 1px solid #000; padding: 12px; vertical-align: top; font-size: 14px; line-height: 1.5; }
        .col-label { width: 30%; background-color: #f2f2f2 !important; font-weight: bold; text-transform: uppercase; }
        .sig-container { margin-top: 50px; display: flex; justify-content: space-between; }
        .sig-box { width: 220px; border-top: 1px solid #000; text-align: center; padding-top: 5px; font-weight: bold; font-size: 12px; }

        @media print {
            body { padding: 0; background: none; }
            .no-print-zone { display: none; }
            .rph-paper { border: none; width: 100%; padding: 0; }
            .col-label { -webkit-print-color-adjust: exact; background-color: #f2f2f2 !important; }
        }
    </style>
</head>
<body>

<div class="no-print-zone">
    <h1 class="setup-title">SISTEM RPH: RBT TAHUN 4</h1>
    
    <div class="input-group">
        <div><label>Tarikh</label><input type="date" id="tark" onchange="setHari()"></div>
        <div><label>Hari</label><input type="text" id="hari" readonly></div>
        <div><label>Minggu</label><select id="mng"></select></div>
        <div><label>Masa</label><input type="text" id="masa" placeholder="09:00 - 10:00"></div>
    </div>

    <div><label>Modul / Tajuk Utama</label><input type="text" id="modul" placeholder="Auto-isi apabila SK dipilih"></div>

    <div style="margin-top:15px">
        <label>Standard Kandungan (Pilih Unit)</label>
        <select id="sk_select" onchange="loadSP()">
            <option value="1.1">1.1 Amalan Keselamatan Bengkel</option>
            <option value="2.1">2.1 Maksud dan Kepentingan Reka Bentuk</option>
            <option value="2.2">2.2 Reka Bentuk Produk Bertema</option>
            <option value="3.1">3.1 Aplikasi Teknologi (Konvensional & Moden)</option>
            <option value="4.1">4.1 Reka Bentuk Pembungkusan</option>
            <option value="5.1">5.1 Reka Bentuk Makanan</option>
            <option value="6.1">6.1 Asas Pengaturcaraan (Algoritma & Carta Alir)</option>
            <option value="6.2">6.2 Pembangunan Kod Arahan (Scratch)</option>
        </select>
    </div>

    <div style="margin-top:15px">
        <label>Standard Pembelajaran (SP)</label>
        <div class="sp-box"><table class="sp-table" id="sp-list"></table></div>
    </div>

    <div class="ai-tools">
        <div><button class="btn-ai" onclick="jana('obj')">✨ JANA OBJEKTIF</button><textarea id="ai_obj" rows="3"></textarea></div>
        <div><button class="btn-ai" onclick="jana('act')">✨ JANA AKTIVITI</button><textarea id="ai_act" rows="3"></textarea></div>
        <div><button class="btn-ai" onclick="jana('ref')">✨ JANA REFLEKSI</button><textarea id="ai_ref" rows="3"></textarea></div>
    </div>

    <button class="btn-main" onclick="simpan()">SIMPAN & JANA RPH PROFESIONAL</button>
    <a href="index.html" class="btn-nav">KEMBALI KE HUB</a>
</div>

<div id="print-area"></div>

<script>
const dataSP = {
    "1.1": ["1.1.1 Menyatakan peraturan keselamatan diri, bengkel, alatan dan bahan.", "1.1.2 Menerangkan maksud simbol dan tanda keselamatan.", "1.1.3 Mengaplikasikan langkah keselamatan jika berlaku kemalangan.", "1.1.4 Membincangkan amalan kebersihan dan penyelenggaraan alatan."],
    "2.1": ["2.1.1 Menerangkan maksud reka bentuk berdasarkan produk sedia ada.", "2.1.2 Mengenal pasti kepentingan reka bentuk dalam kehidupan.", "2.1.3 Membincangkan laluan kerjaya dalam bidang reka bentuk.", "2.1.5 Mengenal pasti elemen reka bentuk (garisan, rupa, bentuk, dll)."],
    "2.2": ["2.2.1 Mengenal pasti dan melakar pelbagai jenis garisan.", "2.2.2 Menjana idea dalam bentuk lakaran produk bertema.", "2.2.5 Menghasilkan produk bertema mengikut lakaran."],
    "3.1": ["3.1.1 Menerangkan teknologi dan kepentingannya.", "3.1.2 Menghuraikan penggunaan teknologi konvensional dan moden.", "3.1.4 Menghasilkan produk dengan menggabungkan teknologi."],
    "4.1": ["4.1.1 Menghubungkait pembungkusan sedia ada dengan reka bentuk.", "4.1.2 Menyenaraikan ciri pembungkusan yang baik.", "4.1.5 Membina reka bentuk pembungkusan kreatif."],
    "5.1": ["5.1.1 Mengenal pasti reka bentuk pada jenis makanan.", "5.1.2 Menerangkan kepentingan reka bentuk makanan.", "5.1.5 Menghasilkan reka bentuk pada bahan makanan."],
    "6.1": ["6.1.1 Menyatakan maksud pengaturcaraan dan kegunaannya.", "6.1.2 Mengenal pasti algoritma, pseudokod dan carta alir.", "6.1.3 Menulis pseudokod dan melukis carta alir jujukan."],
    "6.2": ["6.2.1 Mengenal pasti fitur pada antara muka perisian (Scratch).", "6.2.3 Membina atur cara menggunakan fitur yang dipelajari."]
};

let selectedSPs = [];
const mngSelect = document.getElementById('mng');
for(let i=1; i<=42; i++) mngSelect.innerHTML += `<option value="${i}">Minggu ${i}</option>`;

function setHari() {
    const d = new Date(document.getElementById('tark').value);
    const days = ["Ahad","Isnin","Selasa","Rabu","Khamis","Jumaat","Sabtu"];
    document.getElementById('hari').value = days[d.getDay()] || "";
}

function loadSP() {
    const sk = document.getElementById('sk_select').value;
    const skText = document.getElementById('sk_select').options[document.getElementById('sk_select').selectedIndex].text;
    document.getElementById('modul').value = skText;
    const list = document.getElementById('sp-list');
    list.innerHTML = "";
    selectedSPs = [];
    dataSP[sk].forEach(s => {
        let row = list.insertRow();
        row.onclick = function() {
            this.classList.toggle('selected-row');
            if(this.classList.contains('selected-row')) selectedSPs.push(s);
            else selectedSPs = selectedSPs.filter(i => i !== s);
        };
        row.innerHTML = `<td>${s}</td>`;
    });
}
loadSP();

function jana(type) {
    const mod = document.getElementById('modul').value || "Unit RBT";
    if(type==='obj') document.getElementById('ai_obj').value = `Pada akhir PdPc, murid dapat:\n1. Menguasai kemahiran praktikal dalam ${mod} mengikut kriteria SP dengan betul.`;
    else if(type==='act') document.getElementById('ai_act').value = `1. Penerangan guru menggunakan contoh maujud. 2. Murid menjalankan aktiviti amali/projek secara berkumpulan. 3. Sesi penilaian dan maklum balas guru.`;
    else document.getElementById('ai_ref').value = `___ / ___ murid mencapai objektif amali hari ini.`;
}

function simpan() {
    if(selectedSPs.length === 0) return alert("Pilih SP dahulu!");
    const skText = document.getElementById('sk_select').options[document.getElementById('sk_select').selectedIndex].text;
    const spHtml = selectedSPs.map(s => `• ${s}`).join("<br>");
    
    const content = `
    <div class="rph-paper">
        <div class="rph-header">
            <h2>RANCANGAN PENGAJARAN HARIAN</h2>
            <h3>REKA BENTUK DAN TEKNOLOGI TAHUN 4</h3>
        </div>
        <div class="info-bar">
            <div>
                <strong>TARIKH:</strong> ${document.getElementById('tark').value} | <strong>HARI:</strong> ${document.getElementById('hari').value}<br>
                <strong>MINGGU:</strong> ${document.getElementById('mng').value}
            </div>
            <div style="text-align:right">
                <strong>MASA:</strong> ${document.getElementById('masa').value}<br>
                <strong>GURU:</strong> MOHAMAD HELMIE
            </div>
        </div>
        <table class="rph-main-table">
            <tr><td class="col-label">MODUL / UNIT</td><td>${document.getElementById('modul').value}</td></tr>
            <tr><td class="col-label">STANDARD KANDUNGAN</td><td>${skText}</td></tr>
            <tr><td class="col-label">STANDARD PEMBELAJARAN</td><td style="font-weight:bold">${spHtml}</td></tr>
            <tr><td class="col-label">OBJEKTIF PEMBELAJARAN</td><td>${document.getElementById('ai_obj').value.replace(/\n/g,"<br>")}</td></tr>
            <tr><td class="col-label">AKTIVITI PdPc</td><td>${document.getElementById('ai_act').value.replace(/\n/g,"<br>")}</td></tr>
            <tr><td class="col-label">REFLEKSI / IMPAK</td><td>${document.getElementById('ai_ref').value.replace(/\n/g,"<br>")}</td></tr>
        </table>
        <div class="sig-container">
            <div class="sig-box">TANDATANGAN GURU</div>
            <div class="sig-box">TANDATANGAN PENTADBIR</div>
        </div>
    </div>
    <div style="page-break-after:always;"></div>`;
    document.getElementById('print-area').innerHTML += content;
}
</script>
</body>
</html>
