<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPH MATE T2 - MOHAMAD HELMIE</title>
    <style>
        :root { --primary: #2980b9; --success: #27ae60; --ai: #8e44ad; }
        body { font-family: 'Segoe UI', sans-serif; background: #ebf5fb; padding: 15px; margin: 0; }
        .container { max-width: 1100px; margin: auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .header { text-align: center; border-bottom: 2px solid #333; margin-bottom: 25px; padding-bottom: 10px; }
        .header h1 { margin: 0; font-size: 22px; text-transform: uppercase; }
        .header p { margin: 5px 0; font-weight: bold; color: #555; }
        .input-section { background: #f4f9fd; padding: 20px; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 20px; }
        .grid-flex { display: flex; flex-wrap: wrap; gap: 15px; margin-bottom: 15px; }
        .grid-flex div { flex: 1; min-width: 200px; }
        label { font-weight: bold; font-size: 13px; color: var(--primary); display: block; margin-bottom: 5px; }
        select, input, textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; font-size: 14px; box-sizing: border-box; }
        .sp-table-wrapper { max-height: 300px; overflow-y: auto; border: 1px solid #ccc; border-radius: 5px; background: white; margin-top: 5px; }
        .sp-table { width: 100%; border-collapse: collapse; font-size: 13px; }
        .sp-table tr { cursor: pointer; border-bottom: 1px solid #eee; transition: 0.2s; }
        .sp-table tr:hover { background: #f1f1f1; }
        .sp-table td { padding: 12px; line-height: 1.5; }
        .selected-row { background: #d4e6f1 !important; font-weight: bold; border-left: 5px solid var(--primary); }
        .ai-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin-top: 20px; }
        .ai-box { border: 1px solid #d1d1d1; padding: 15px; border-radius: 8px; background: #fff; }
        .btn-ai { background: var(--ai); color: white; border: none; padding: 7px 12px; border-radius: 4px; cursor: pointer; font-size: 11px; margin-bottom: 8px; font-weight: bold; }
        .btn-save { background: var(--success); color: white; padding: 15px; border: none; border-radius: 5px; width: 100%; font-size: 16px; cursor: pointer; font-weight: bold; margin-top: 25px; }
        .footer-btns { display: flex; gap: 10px; margin-top: 15px; }
        .btn-util { flex: 1; padding: 12px; border: none; border-radius: 5px; cursor: pointer; color: white; font-weight: bold; text-align: center; text-decoration: none; font-size: 14px; }
        .rph-table { width: 100%; border-collapse: collapse; margin-top: 40px; border: 2px solid #000; background: white; }
        .rph-table td { border: 1px solid #000; padding: 12px; vertical-align: top; font-size: 14px; color: black; line-height: 1.6; }
        .label-cell { width: 220px; background: #f2f2f2; font-weight: bold; text-transform: uppercase; }
        @media print { .no-print { display: none; } }
    </style>
</head>
<body>

<div class="container no-print">
    <div class="header">
        <h1>RANCANGAN PENGAJARAN HARIAN (KEMASKINI)</h1>
        <p>MOHAMAD HELMIE | SK KEPANGIAN (MATEMATIK TAHUN 2)</p>
    </div>

    <div class="input-section">
        <div class="grid-flex">
            <div><label>Tarikh</label><input type="date" id="tark" onchange="setHari()"></div>
            <div><label>Hari</label><input type="text" id="hari" readonly></div>
            <div><label>Minggu</label><select id="mng"></select></div>
            <div><label>Masa</label><input type="text" id="masa" placeholder="07:30 - 08:30"></div>
        </div>

        <div><label>Bidang / Tajuk</label><input type="text" id="tajuk" placeholder="Contoh: NOMBOR DAN OPERASI / 2.0 OPERASI ASAS"></div>

        <div style="margin-top:15px">
            <label>Standard Kandungan (Pilih SK)</label>
            <select id="sk_select" onchange="loadSP()">
                <option value="1.7">1.7 Pola Nombor</option>
                <option value="1.8">1.8 Penyelesaian Masalah (Nombor)</option>
                <option value="2.1">2.1 Tambah dalam lingkungan 1000</option>
                <option value="2.2">2.2 Tolak dalam lingkungan 1000</option>
                <option value="2.3">2.3 Darab dalam lingkungan 1000</option>
                <option value="2.4">2.4 Bahagi dalam lingkungan 1000</option>
                <option value="3.1">3.1 Pecahan Wajar</option>
                <option value="3.2">3.2 Perpuluhan</option>
                <option value="3.3">3.3 Pecahan dan Perpuluhan</option>
                <option value="4.1">4.1 Wang Kertas dan Duit Syiling</option>
            </select>
        </div>

        <div style="margin-top:15px">
            <label>Standard Pembelajaran (Klik untuk pilih SP)</label>
            <div class="sp-table-wrapper">
                <table class="sp-table" id="sp-table-body"></table>
            </div>
        </div>

        <div class="ai-grid">
            <div class="ai-box">
                <button class="btn-ai" onclick="janaAI('obj')">✨ JANA OBJEKTIF</button>
                <textarea id="ai_obj" rows="4"></textarea>
            </div>
            <div class="ai-box">
                <button class="btn-ai" onclick="janaAI('act')">✨ JANA AKTIVITI</button>
                <textarea id="ai_act" rows="4"></textarea>
            </div>
            <div class="ai-box">
                <button class="btn-ai" onclick="janaAI('ref')">✨ JANA REFLEKSI</button>
                <textarea id="ai_ref" rows="4"></textarea>
            </div>
        </div>

        <button class="btn-save" onclick="simpan()">SIMPAN RPH KE JADUAL</button>
        
        <div class="footer-btns">
            <button class="btn-util" style="background:#333" onclick="window.print()">CETAK RPH (PDF)</button>
            <a href="index.html" class="btn-util" style="background:#7f8c8d">KEMBALI KE HUB</a>
        </div>
    </div>
</div>

<div id="output"></div>

<script>
const dataSP = {
    "1.7": [
        "1.7.1 Mengenal pasti pola bagi siri nombor yang diberi.",
        "1.7.2 Melengkapkan pelbagai pola nombor yang mudah."
    ],
    "1.8": [
        "1.8.1 Menyelesaikan masalah yang melibatkan situasi harian."
    ],
    "2.1": [
        "2.1.1 Menambah dua nombor hasil tambah dalam lingkungan 1000.",
        "2.1.2 Menambah tiga nombor hasil tambah dalam lingkungan 1000."
    ],
    "2.2": [
        "2.2.1 Menolak dua nombor dalam lingkungan 1000.",
        "2.2.2 Menolak dua nombor dari satu nombor dalam lingkungan 1000."
    ],
    "2.3": [
        "2.3.1 Mendarab dalam lingkungan fakta asas.",
        "2.3.2 Mendarab nombor satu digit dengan 10."
    ],
    "2.4": [
        "2.4.1 Membahagi dalam lingkungan fakta asas.",
        "2.4.2 Membahagi sebarang nombor dua digit dengan 10."
    ],
    "3.1": [
        "3.1.1 Mengenal pasti pecahan wajar yang pengangkanya 1 dan penyebutnya hingga 10.",
        "3.1.2 Menamakan pecahan wajar yang pengangkanya hingga 9 dan penyebutnya hingga 10."
    ],
    "3.2": [
        "3.2.1 Menukar pecahan persepuluh kepada perpuluhan.",
        "3.2.2 Menyebut perpuluhan sifar perpuluhan satu hingga sifar perpuluhan sembilan.",
        "3.2.3 Menunjuk nombor perpuluhan 0.1 hingga 0.9.",
        "3.2.5 Menulis perpuluhan yang diberi.",
        "3.2.6 Membanding nilai dua perpuluhan yang diberi."
    ],
    "3.3": [
        "3.3.1 Membanding nilai pecahan dan nilai perpuluhan yang diberi."
    ],
    "4.1": [
        "4.1.1 Mengenal pasti mata wang Malaysia hingga RM100.",
        "4.1.2 Menentukan nilai wang hingga RM100."
    ]
};

let selectedSPs = [];
const mS = document.getElementById('mng'); for(let i=1; i<=42; i++) mS.innerHTML += `<option value="${i}">Minggu ${i}</option>`;

function setHari() { 
    let d = new Date(document.getElementById('tark').value); 
    document.getElementById('hari').value = ['Ahad','Isnin','Selasa','Rabu','Khamis','Jumaat','Sabtu'][d.getDay()] || ''; 
}

function loadSP() {
    let sk = document.getElementById('sk_select').value; 
    let b = document.getElementById('sp-table-body'); 
    b.innerHTML = "";
    selectedSPs = []; 
    dataSP[sk].forEach((s) => {
        let row = b.insertRow();
        row.onclick = function() { 
            if(this.classList.contains('selected-row')) {
                this.classList.remove('selected-row');
                selectedSPs = selectedSPs.filter(item => item !== s);
            } else {
                this.classList.add('selected-row');
                selectedSPs.push(s);
            }
        };
        row.innerHTML = `<td>${s}</td>`;
    });
}

loadSP();

function janaAI(t) {
    let tajuk = document.getElementById('tajuk').value || "Tajuk Pembelajaran";
    if(selectedSPs.length === 0) return alert("Pilih SP dahulu!");
    if(t==='obj') {
        document.getElementById('ai_obj').value = `Pada akhir PdPc, murid dapat:\n1. Menguasai Standard Pembelajaran yang dipilih berkaitan ${tajuk} secara bertulis atau lisan dengan tepat.`;
    } else if(t==='act') {
        document.getElementById('ai_act').value = `1. Set Induksi: Murid mendengar penjelasan guru tentang ${tajuk}.\n2. Aktiviti: Murid melaksanakan latihan pengukuhan menggunakan bahan konkrit/gambar rajah.\n3. Penutup: Murid membuat kesimpulan pembelajaran hari ini.`;
    } else {
        document.getElementById('ai_ref').value = `___ / ___ murid berjaya mencapai objektif pembelajaran.`;
    }
}

function simpan() {
    if(selectedSPs.length === 0) return alert("Pilih sekurang-kurangnya satu SP!");
    let skText = document.getElementById('sk_select').options[document.getElementById('sk_select').selectedIndex].text;
    let spHtml = selectedSPs.map(s => `• ${s}`).join("<br>");
    let html = `<table class="rph-table">
        <tr><td class="label-cell">INFO</td><td>MG ${document.getElementById('mng').value} | ${document.getElementById('tark').value} | ${document.getElementById('hari').value}</td></tr>
        <tr><td class="label-cell">BIDANG / TAJUK / MASA</td><td>${document.getElementById('tajuk').value} | ${document.getElementById('masa').value}</td></tr>
        <tr><td class="label-cell">STANDARD KANDUNGAN</td><td>${skText}</td></tr>
        <tr><td class="label-cell">STANDARD PEMBELAJARAN</td><td>${spHtml}</td></tr>
        <tr><td class="label-cell">OBJEKTIF</td><td>${document.getElementById('ai_obj').value.replace(/\n/g,"<br>")}</td></tr>
        <tr><td class="label-cell">AKTIVITI</td><td>${document.getElementById('ai_act').value.replace(/\n/g,"<br>")}</td></tr>
    </table><div style="page-break-after:always;"></div>`;
    document.getElementById('output').innerHTML += html;
}
</script>
</body>
</html>